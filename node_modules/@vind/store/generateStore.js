import { reactiveVariable } from '../reactivity/reactiveVariable.js'
import {
    REACTIVE_VARIABLE_REF_CONFIG,
    REACTIVE_VARIABLE_COMPUTED_CONFIG,
} from '../configuration/configuration.js'

export function generateStore(name, storeFunction) {
    return () => {
        const store = storeFunction({
            ref: (value) => {
                return reactiveVariable(value, structuredClone(REACTIVE_VARIABLE_REF_CONFIG))
            },
            computed: (callback) => {
                return reactiveVariable(callback, structuredClone(REACTIVE_VARIABLE_COMPUTED_CONFIG))
            }
        })

        $VindEngine.stores[name] = store
    }
}