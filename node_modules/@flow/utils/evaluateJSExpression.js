export const evaluateJSExpression = (componentSetup, expression) => {
    const setupKeys = Object.keys(componentSetup)

    const evaluator = new Function(...setupKeys, `return ${expression}`)

    const setupValues = Object.values(componentSetup)

    setupValues.forEach((setupValue, index) => {
        if (setupValue?.configuration?.isRef) {
            setupValues[index] = setupValues[index].value
        }

        if (setupValue?.configuration?.isComputed) {
            setupValues[index] = setupValues[index].value()
        }
    })

    return evaluator(...setupValues)
}