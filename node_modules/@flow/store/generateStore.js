import { reactiveVariable, generateNewReference } from '../reactivity/reactiveVariable.js'

// This is the function that generates a global store
export function generateStore(name, storeFunction) {
    return () => {
        const storeReference = generateNewReference()

        const store = storeFunction({
            ref: (value) => {
                return Array.isArray(value) ? createReactiveArray(value, storeReference) : reactiveVariable(value, storeReference, { isStored: true })
            }
        })

        $Flow.setStore(name, store)
    }
}