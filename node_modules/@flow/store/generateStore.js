import { reactiveVariable } from '../reactivity/reactiveVariable.js'

// This is the function that generates a global store
export function generateStore(name, storeFunction) {
    return () => {
        const store = storeFunction({
            ref: (value) => {
                return reactiveVariable(value, { isStored: true, isRef: true, influences: [] })
            },
            computed: (callback) => {
                return reactiveVariable(callback, { isStored: false, isRef: false, isComputed: true, influences: [], dependsOn: [] })
            }
        })

        $FlowEngine.setStore(name, store)
    }
}